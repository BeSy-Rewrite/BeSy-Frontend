<h2 mat-dialog-title>Dokument hochladen</h2>
<mat-dialog-content>
    <h3 class="mb-2">Bitte wählen Sie ein Dokument zum Hochladen aus.</h3>

    @if (!data.invoiceId) {
    <div class="min-w-full overflow-x-hidden px-8">
        <app-form-component [config]="documentFormConfig" [formGroup]="documentFormGroup" />
    </div>
    }

    <form class="flex flex-col gap-2 my-8">

        @if (!data.invoiceId) {
        <label for="radio-buttons" id="radio-button-label">
            Bestehendes Paperless-Dokument verknüpfen?
        </label>
        <mat-radio-group id="radio-buttons" aria-labelledby="radio-button-label" [formControl]="linkExistingDocument"
                         class="flex flex-row mt-2 mb-4 mx-8">
            <mat-radio-button class="mr-4" [value]="true">
                Ja
            </mat-radio-button>
            <mat-radio-button [value]="false">
                Nein
            </mat-radio-button>
        </mat-radio-group>
        }

        <div class="px-8 w-full">
            @if (linkExistingDocument.value && !data.invoiceId) {
            <mat-form-field class="w-full">
                <mat-label>Bestehende Paperless-ID eingeben</mat-label>
                <input matInput type="number" [formControl]="existingDocumentId"
                       [required]="linkExistingDocument.value && !data.invoiceId" />
            </mat-form-field>

            } @else {

            <app-file-input [required]="!linkExistingDocument.value" (fileChange)="onFileSelected($event)"
                            accept="application/pdf" />
            }
        </div>
    </form>

</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-stroked-button mat-dialog-close>Abbrechen</button>
    <button mat-flat-button color="primary" (click)="onUpload()" [disabled]="!isValid()">Hochladen</button>
</mat-dialog-actions>
