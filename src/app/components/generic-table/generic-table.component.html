<div class="overflow-x-auto w-full">
    <table mat-table [dataSource]="dataSource()" matSort>

        @for (column of internalColumns(); track $index) {
        <ng-container matColumnDef="{{column.id}}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="column.isUnsortable">
                {{column.label}}
            </th>

            @if (column.id !== 'actions') {
            <td mat-cell *matCellDef="let element">
                @if (column.action === undefined) {
                {{element[column.id]}}
                } @else {
                <button mat-stroked-button color="primary" [attr.aria-label]="'Perform action on ' + element[column.id]"
                    (click)="column.action(element)">{{element[column.id]}}</button>
                }
            </td>


            } @else {
            <td mat-cell *matCellDef="let element">

                <div class="flex flex-nowrap w-fit">
                    @for (button of actions(); track $index) {
                    <button class="mr-4" mat-button [color]="button.color ?? 'default'"
                        (click)="handleAction(button, element)" [matButton]="button.buttonType ?? ''">
                        {{button.label}}
                    </button>
                    }
                </div>

            </td>
            }
        </ng-container>
        }

        <tr mat-header-row *matHeaderRowDef="displayedColumnIds()" sticky></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnIds();" (click)="onRowClick(row)" [class.selected]="selectedRow === row"></tr>

    </table>
</div>

<mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons aria-label="WÃ¤hle Seite der Liste" />
