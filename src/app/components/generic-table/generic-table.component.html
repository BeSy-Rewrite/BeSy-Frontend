<div class="overflow-x-auto w-full">
    <table mat-table [dataSource]="dataSource()" matSort>

        @for (column of internalColumns(); track $index) {
        <ng-container matColumnDef="{{column.id}}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="column.isUnsortable">
                {{column.label}}
            </th>

            @if (column.id !== 'actions') {
            <td mat-cell *matCellDef="let element">{{element[column.id]}}</td>

            } @else {
            <td mat-cell *matCellDef="let element">

                <div class="flex flex-nowrap w-fit">
                    @for (button of actions(); track $index) {
                    <button class="mr-4" mat-button [color]="button.color ?? 'default'"
                        (click)="handleAction(button, element)" [matButton]="button.buttonType ?? ''">
                        {{button.label}}
                    </button>
                    }
                </div>

            </td>
            }
        </ng-container>
        }

        <tr mat-header-row *matHeaderRowDef="internalDisplayedColumnIds()" sticky></tr>
        <tr mat-row *matRowDef="let row; columns: internalDisplayedColumnIds();"></tr>

    </table>
</div>

<mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons aria-label="WÃ¤hle Seite der Liste" />
